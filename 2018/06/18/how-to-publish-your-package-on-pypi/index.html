<!DOCTYPE html><html lang="en,zh-cn,default"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> How to Publish Your Package on PyPi · Infinite.ft的博客</title><meta name="description" content="How to Publish Your Package on PyPi - infinite.ft"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://free-free.github.io/atom.xml" title="Infinite.ft的博客"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">HOME</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="/categories/math" target="_self" class="nav-list-link">MATH</a></li><li class="nav-list-item"><a href="/categories/tech" target="_self" class="nav-list-link">TECH</a></li><li class="nav-list-item"><a href="/categories/mylife" target="_self" class="nav-list-link">NOTES</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li><li class="nav-list-item"><a href="/about" target="_self" class="nav-list-link">ABOUT</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">How to Publish Your Package on PyPi</h1><div class="post-info">Jun 18, 2018</div><div class="post-content"><p>As an novice of python, I bet you are sometimes wondering how to publish your package on <a href="https://pypi.o rg/" target="_blank" rel="external">PyPi</a> like I’ve ever done. So today I would like to introduce how to publish your python package on <a href="https://pypi.org/" target="_blank" rel="external">PyPi</a> step by step, hopefully you enjoy it.</p>
<p>Publishing package on <a href="https://pypi.org/" target="_blank" rel="external">PyPi</a> is simply divided into the following few steps:</p>
<p><code>step1</code>:  Create python your <a href="https://pypi.org/" target="_blank" rel="external">PyPi</a> account on its <a href="https://pypi.org/" target="_blank" rel="external">website</a>.</p>
<p><code>step2</code>:  Create your <strong>setup.py</strong> in project’s top directory.</p>
<p><code>step3</code>:  Build your package wheel, then test it on your local environment just in case the wrongs on your <strong>steup.py</strong> file.</p>
<p><code>step4</code>: Upload your wheel files to <a href="https://pypi.org/" target="_blank" rel="external">PyPi</a>.</p>
<h3 id="Step1-Create-PyPi-Account"><a href="#Step1-Create-PyPi-Account" class="headerlink" title="Step1: Create PyPi Account"></a>Step1: Create PyPi Account</h3><p>Unless you have ever created PyPi account, you’ll need to register one on it’s <a href="https://pypi.org/account/register/" target="_blank" rel="external">website</a>, then sign in. Do be scare of it, it’s very simple and completely not trivial as like you register on other website.</p>
<p><img src="http://bmob-cdn-20029.b0.upaiyun.com/2018/06/18/f15f7a5940ae696880a321f4b6402e27.png" alt=""></p>
<p>As the figure above, you just need to type in your name, email and password, then hit  bottom button, the rest of stuffs  will be automatically completed by system.</p>
<h3 id="Step2-Create-setup-py-File"><a href="#Step2-Create-setup-py-File" class="headerlink" title="Step2: Create setup.py File"></a>Step2: Create setup.py File</h3><p>Although Creating <strong>setup.py</strong> file is the most trickiest part and more trivial , the minimal working configuration is much easier than your expectations. A minimal working configuration of <strong>setup.py</strong> file is shown as below. As an aside , this example is picked from my project <a href="https://github.com/free-free/submail" target="_blank" rel="external">submail</a>. For more details about <strong>setup</strong> file , you can refer to the <a href="https://packaging.python.org/tutorials/packaging-projects/#setup-args" target="_blank" rel="external">official documentation</a>.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> setuptools <span class="keyword">import</span> setup, find_packages</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">read</span><span class="params">(f)</span>:</span></div><div class="line">    <span class="keyword">return</span> open(os.path.join(os.path.dirname(__file__),f)).read().strip()</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">find_version</span><span class="params">(f)</span>:</span></div><div class="line">    file_content = read(f)</div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        version = re.findall(<span class="string">r'^__version__ = "([^\'\"]+)"\r?$'</span>,</div><div class="line">            file_content, re.M)[<span class="number">0</span>]</div><div class="line">    <span class="keyword">except</span> IndexError:</div><div class="line">        <span class="keyword">raise</span> RuntimeError(<span class="string">"Unable to determine version."</span>)</div><div class="line">    <span class="keyword">return</span> version</div><div class="line"></div><div class="line"></div><div class="line">setup(</div><div class="line">    name=<span class="string">"submail"</span>,</div><div class="line">    version=find_version(<span class="string">"submail/__init__.py"</span>),</div><div class="line">    author=<span class="string">"HuangBiao"</span>,</div><div class="line">    author_email=<span class="string">"19941222hb@gmail.com"</span>,</div><div class="line">    long_description=read(<span class="string">'README.rst'</span>),</div><div class="line">    description=<span class="string">"submail sdk"</span>,</div><div class="line">    url=<span class="string">"https://github.com/free-free/submail"</span>,</div><div class="line">    license=<span class="string">"MIT"</span>,</div><div class="line">    packages=find_packages(),</div><div class="line">    install_requires=[<span class="string">"requests"</span>, <span class="string">"pytest"</span>],</div><div class="line">    include_package_data=<span class="keyword">True</span>,</div><div class="line">    keywords=[<span class="string">'submail'</span>,<span class="string">'sdk'</span>],</div><div class="line">    classifiers=[</div><div class="line">        <span class="string">'Intended Audience :: Developers'</span>,</div><div class="line">        <span class="string">'License :: OSI Approved :: MIT License'</span>,</div><div class="line">        <span class="string">'Programming Language :: Python'</span>,</div><div class="line">        <span class="string">'Programming Language :: Python :: 3'</span>,</div><div class="line">        <span class="string">'Programming Language :: Python :: 3.3'</span>,</div><div class="line">        <span class="string">'Programming Language :: Python :: 3.4'</span>,</div><div class="line">        <span class="string">'Programming Language :: Python :: 3.5'</span>,</div><div class="line">        <span class="string">'Topic :: Software Development :: Libraries :: Python Modules'</span>,</div><div class="line">        <span class="string">'Topic :: Internet :: WWW/HTTP :: Dynamic Content'</span></div><div class="line">    ]</div><div class="line">)</div></pre></td></tr></table></figure>
<p>Skimming through the above example, I suppose you have understood the most parts of <strong>setup</strong> file. Especially here I’d like to focus on the argument <code>classifiers</code>. Cause the number of available values of <code>classifiers</code> are numerous.  so make sure to consult the <a href="https://pypi.org/pypi?%3Aaction=list_classifiers" target="_blank" rel="external">classifiers list</a>, as anything else will cause an error. Again, be sure to read the <a href="https://packaging.python.org/tutorials/packaging-projects/#setup-args" target="_blank" rel="external">documentation</a> for more information  on it, since explaining what all these arguments exactly mean is beyond purpose of this article, maybe I will  do it in another new article.</p>
<h3 id="Step3-Build-Package-Wheel"><a href="#Step3-Build-Package-Wheel" class="headerlink" title="Step3: Build Package Wheel"></a>Step3: Build Package Wheel</h3><p>Once creation of <code>setup.py</code> file is done, you can try and  build your package wheel files, then just need to type the following command in your bash shell, the package wheel will automatically be generated</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ python setup.py bdist_wheel</div></pre></td></tr></table></figure>
<p>After doing that, there will be several new directories being created, all you need to know is the <code>dist</code>  directory, it contains your package wheel file. Also, it’s a good practice to try to install the new package , since it is particularly useful for testing your configurations whether are correct.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ python install dist/my-project.whl</div></pre></td></tr></table></figure>
<p>It’s a good indicator that everything is ok , when there are no errors occurring in your installation process.  it’s time to upload your package to PyPi.</p>
<h3 id="Step4-Upload-Wheel-File-To-PyPi"><a href="#Step4-Upload-Wheel-File-To-PyPi" class="headerlink" title="Step4: Upload Wheel File To PyPi"></a>Step4: Upload Wheel File To PyPi</h3><p>it is need to install  <a href="https://pypi.org/project/twine/" target="_blank" rel="external">Twine</a> before uploading your package. Twine is a tool for publishing package on PyPi, it’s recommend to read the <a href="https://pypi.org/project/twine/" target="_blank" rel="external">official documentation</a>. Unless you ever have installed  Twine,  you need to install Twine by following the command below.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ pip install twine</div></pre></td></tr></table></figure>
<p>Once succeed to install twine, all you need is to upload your wheel file using Twine:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ twine upload dist/*</div></pre></td></tr></table></figure>
<p>Provided you have a valid <code>~/.pypirc</code>, it will just ask for your password. Or it will ask for your PyPI’s  username and password, then type them. For the sake of convenience, you can priorly create <code>.pypirc</code> file.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[distutils]</div><div class="line">index-servers=pypi</div><div class="line"></div><div class="line">[pypi]</div><div class="line">username: your pypi username</div><div class="line">password: your pypi password</div><div class="line">repository: https://upload.pypi.org/legacy/</div></pre></td></tr></table></figure>
<p>Congratulations! You have just learned to how to share your package with community. </p>
</div></article></div></main><footer><div class="paginator"><a href="/2018/05/22/top-conference-and-journal-of-dip-and-computer-vision/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2018 <a href="https://free-free.github.io">infinite.ft</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>