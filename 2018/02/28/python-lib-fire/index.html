<!DOCTYPE html><html lang="en,zh-cn,default"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Create CLIs in Python Using Fire · Infinite.ft的博客</title><meta name="description" content="Create CLIs in Python Using Fire - infinite.ft"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://free-free.github.io/atom.xml" title="Infinite.ft的博客"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">HOME</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="/categories/math" target="_self" class="nav-list-link">MATH</a></li><li class="nav-list-item"><a href="/categories/tech" target="_self" class="nav-list-link">TECH</a></li><li class="nav-list-item"><a href="/categories/mylife" target="_self" class="nav-list-link">NOTES</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li><li class="nav-list-item"><a href="/about" target="_self" class="nav-list-link">ABOUT</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Create CLIs in Python Using Fire</h1><div class="post-info">Feb 28, 2018</div><div class="post-content"><p>In 2018 early, Google open-source it’s one of new Python library called <a href="https://github.com/google/python-fire" target="_blank" rel="external"><strong>Fire</strong></a>. <strong>Fire</strong> is a powerful tool to automatically generate command line interfaces(CLIs) from any Python object. With it’s assistance, you can easily transition between Bash and Python, also develop and debug your Python code. That’s why I choose it. </p>
<h4 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h4><p>Like other Python library, The installation of <strong>Fire</strong> is very simple and clear. You just need to type the following command in your bash interface, then leaving processes will automatically finish.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> pip install fire</span></div></pre></td></tr></table></figure>
<h4 id="Usage-Exmaples"><a href="#Usage-Exmaples" class="headerlink" title="Usage Exmaples"></a>Usage Exmaples</h4><h5 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World"></a>Hello World</h5><p><strong>version1: <code>fire.Fire()</code></strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#@file: hello.py</span></div><div class="line"><span class="keyword">import</span> fire</div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">say_hello</span><span class="params">(name)</span>:</span></div><div class="line">	<span class="keyword">return</span> <span class="string">"Hello &#123;name&#125;"</span>.format(name=name)</div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">	fire.Fire()</div></pre></td></tr></table></figure>
<p>Here expose  <code>say_hello</code> function to command line,so you can call it in your bash like the following manner.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ python hello.py say_hello john</div><div class="line">Hello john</div></pre></td></tr></table></figure>
<p><strong>version2: <code>fire.Fire(&lt;fn&gt;)</code></strong></p>
<p>Besides call <code>fire.Fire()</code> directly, also you can pass a function to it. Doing this,  it will be slightly different when you call it in your bash shell command line.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#file: hello.py</span></div><div class="line"><span class="keyword">import</span> fire</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">say_hello</span><span class="params">(name)</span>:</span></div><div class="line">  	<span class="keyword">return</span> <span class="string">"Hello &#123;name&#125;"</span>.format(name=name)</div><div class="line">  </div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">  	fire.Fire(say_hello)</div></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> python hello.py john</span></div><div class="line">Hello john</div></pre></td></tr></table></figure>
<hr>
<h5 id="Multiple-commands"><a href="#Multiple-commands" class="headerlink" title="Multiple commands"></a>Multiple commands</h5><p>In the previous section, we just have one function totally, it’s hard to show you the power of <strong>fire</strong>. In this section, multiple commands will be introduced. </p>
<p><strong>version 1:<code>fire.Fire()</code></strong></p>
<p>Like the <code>hello world</code> example, here you also can write multiple function , then call it directly in your bash shell.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#@file: mcmds.py</span></div><div class="line"><span class="keyword">import</span> fire</div><div class="line"><span class="keyword">import</span> functools</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(x, y)</span>:</span></div><div class="line">	<span class="keyword">return</span> x + y</div><div class="line">  </div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">cumsum</span><span class="params">(*args)</span>:</span></div><div class="line">  	<span class="keyword">return</span> functools.reduce(<span class="keyword">lambda</span> x,y: x + y, args)</div><div class="line">    </div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">	fire.Fire()</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ python mcmds.py cumsum 1 2 3 4</div><div class="line">10</div><div class="line">$ python mcmds.py add 12 32</div><div class="line">44</div></pre></td></tr></table></figure>
<p><strong>version 2: <code>fire.Fire(&lt;dict&gt;)</code></strong></p>
<p>If you intend to expose your function as a different name, this version may be suitable for you.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#@file: mcmds.py</span></div><div class="line"><span class="keyword">import</span> fire</div><div class="line"><span class="keyword">import</span> functools</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(x, y)</span>:</span></div><div class="line">  	<span class="keyword">return</span> x + y</div><div class="line">  </div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">cumsum</span><span class="params">(*args)</span>:</span></div><div class="line">	<span class="keyword">return</span> functools.reduce(<span class="keyword">lambda</span> x, y: x + y, args)</div><div class="line">  </div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">	fire.Fire(&#123;</div><div class="line">        <span class="string">'add'</span>:add,</div><div class="line">      	<span class="string">'cumsum'</span>: cumsum</div><div class="line">    &#125;)</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ python mcmds.py add 10 32</div><div class="line">44</div><div class="line">$ python mcmds.py cumsum 1 2 3 4</div><div class="line">10</div></pre></td></tr></table></figure>
<p><strong>version 3: <code>fire.Fire(&lt;object&gt;)</code></strong></p>
<p>As shown by the previous examples,  they are all functions,  if you are going to expose your object’s method as a command line . Is there all solution for satisfying your demands? </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#@file: hello.py</span></div><div class="line"><span class="keyword">import</span> fire</div><div class="line"><span class="keyword">import</span> functools</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Calculator</span><span class="params">(object)</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(self, x, y)</span>:</span></div><div class="line">        <span class="keyword">return</span> x + y</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">cumsum</span><span class="params">(self, *args)</span>:</span></div><div class="line">        <span class="keyword">return</span> functools.reduce(<span class="keyword">lambda</span> x, y: x + y, args)</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    calc = Calculator()</div><div class="line">    fire.Fire(calc)</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ python hello.py add 10 10</div><div class="line">20</div><div class="line">$ python hello.py cumsum 10 1 2 3 4 </div><div class="line">20</div></pre></td></tr></table></figure>
<p><strong>version 4: <code>fire.Fire(&lt;class&gt;)</code></strong></p>
<p>The one of difference between version 3 and version 4 is that you can pass arguments for constructing the class. </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#@file: hello.py</span></div><div class="line"><span class="keyword">import</span> fire</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">IntNumber</span><span class="params">(object)</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, initial_value = <span class="number">1</span>)</span>:</span></div><div class="line">        self._ival = initial_value</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">plus</span><span class="params">(self, x)</span>:</span></div><div class="line">        <span class="keyword">return</span> self._ival + x</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">times</span><span class="params">(self, x)</span>:</span></div><div class="line">        <span class="keyword">return</span> self._ival * x</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    fire.Fire(IntNumber)</div></pre></td></tr></table></figure>
<p>The arguments to <code>__init__</code> method must be passed with the —flag syntax, like the following usage.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">$ python hello.py plus 10</div><div class="line">11</div><div class="line">$ python hello.py <span class="built_in">times</span> 10</div><div class="line">10</div><div class="line">$ python hello.py plus 10 --initial_value=10</div><div class="line">20</div><div class="line">$ python hello.py <span class="built_in">times</span> 10 --initial_value=0 <span class="comment"># here you pass initial value to init method using --falg syntax </span></div><div class="line">0</div></pre></td></tr></table></figure>
<hr>
<h5 id="Grouping-Commands"><a href="#Grouping-Commands" class="headerlink" title="Grouping Commands"></a>Grouping Commands</h5><p>In addition, you can make a command line interface with grouped commands, like the below.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#@file: hello.py</span></div><div class="line"><span class="keyword">import</span> fire</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">RobotLeg</span><span class="params">(object)</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> <span class="string">"The leg is moving forward!"</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">state</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span>  <span class="string">"The leg is active!"</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">RobotArm</span><span class="params">(object)</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> <span class="string">"The arm is moving!"</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">state</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> <span class="string">"The arm is active!"</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Robot</span><span class="params">(object)</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></div><div class="line">        self.arm = RobotArm()</div><div class="line">        self.leg = RobotLeg()</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></div><div class="line">        print(self.arm.run())</div><div class="line">        print(self.leg.run())</div><div class="line">    <span class="string">"""</span></div><div class="line"><span class="string">    # also can you define 'run' function as a generator, it works samely!</span></div><div class="line"><span class="string">    def run(self):</span></div><div class="line"><span class="string">      	yield self.arm.run()</span></div><div class="line"><span class="string">        yield self.leg.run()</span></div><div class="line"><span class="string">	"""</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    fire.Fire(Robot)</div></pre></td></tr></table></figure>
<p>Here’s how this looks at the command line:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">$ python hello.py run</div><div class="line">The arm is moving!</div><div class="line">The leg is moving forward!</div><div class="line">$ python hello.py arm run</div><div class="line">The arm is moving!</div><div class="line">$ python hello.py arm state</div><div class="line">The arm is active!</div><div class="line">$ python hello.py leg run</div><div class="line">The leg is moving forward!</div><div class="line">$ python hello.py leg state</div><div class="line">The leg is active!</div></pre></td></tr></table></figure>
<hr>
<h5 id="Accessing-Properties"><a href="#Accessing-Properties" class="headerlink" title="Accessing Properties"></a>Accessing Properties</h5><p>Accessing Properties of object is much necessary and useful, as you expose the specific object to the command line.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#@file: hello.py</span></div><div class="line"><span class="keyword">import</span> fire</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">City</span><span class="params">(object)</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, postal_code, name=<span class="string">"paradise"</span>)</span>:</span></div><div class="line">        self.pcode = postal_code</div><div class="line">        self.name = name</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    fire.Fire(City)</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ python hello.py --postal_code=521002 pcode</div><div class="line">521002</div><div class="line">$ python hello.py --postal_code=512002 name</div><div class="line">paradise</div></pre></td></tr></table></figure>
<hr>
<h5 id="Chaining-Function-Calls"><a href="#Chaining-Function-Calls" class="headerlink" title="Chaining Function Calls"></a>Chaining Function Calls</h5><p>When you call a <strong>Fire</strong> command, the same action you can take on the <em>result</em> of the call to <strong>Fire</strong>. For example:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ python hello.py --postal_code=521000 name upper</div><div class="line">PARADISE</div></pre></td></tr></table></figure>
<p>The above code works because the <code>upper</code> is a method on all strings. </p>
<p>So, if you want to set up your functions to chain nicely, all you have to do is have a class whose methods return self. An example is following.(tip: this example is taken from official document).</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#@file: hello.py</span></div><div class="line"><span class="keyword">import</span> fire</div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">BinaryCanvas</span><span class="params">(object)</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, size=<span class="number">10</span>)</span>:</span></div><div class="line">        self.pixels = [[<span class="number">0</span>] * size <span class="keyword">for</span> _ <span class="keyword">in</span> range(size)]</div><div class="line">        self._size = size</div><div class="line">        self._row = <span class="number">0</span></div><div class="line">        self._col = <span class="number">0</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> <span class="string">'\r\n'</span>.join(<span class="string">' '</span>.join(str(pixel) <span class="keyword">for</span> pixel <span class="keyword">in</span> row) <span class="keyword">for</span> row <span class="keyword">in</span> self.pixels)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">show</span><span class="params">(self)</span>:</span></div><div class="line">        print(self)</div><div class="line">        <span class="keyword">return</span> self</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">move</span><span class="params">(self, row, col)</span>:</span></div><div class="line">        self._row = row % self._size</div><div class="line">        self._col = col % self._size</div><div class="line">        <span class="keyword">return</span> self</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">on</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.set(<span class="number">1</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">off</span><span class="params">(self)</span>:</span></div><div class="line">        <span class="keyword">return</span> self.set(<span class="number">0</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">set</span><span class="params">(self, value)</span>:</span></div><div class="line">        self.pixels[self._row][self._col] = value</div><div class="line">        <span class="keyword">return</span> self</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    fire.Fire(BinaryCanvas)</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">$ python hello.py move 3 3 on move 3 6 on move 6 3 on move 6 6 on move 7 4 move 7 5 on __str__</div><div class="line">0 0 0 0 0 0 0 0 0 0</div><div class="line">0 0 0 0 0 0 0 0 0 0</div><div class="line">0 0 0 0 0 0 0 0 0 0</div><div class="line">0 0 0 1 0 0 1 0 0 0</div><div class="line">0 0 0 0 0 0 0 0 0 0</div><div class="line">0 0 0 0 0 0 0 0 0 0</div><div class="line">0 0 0 1 0 0 1 0 0 0</div><div class="line">0 0 0 0 0 1 0 0 0 0</div><div class="line">0 0 0 0 0 0 0 0 0 0</div><div class="line">0 0 0 0 0 0 0 0 0 0</div></pre></td></tr></table></figure>
<hr>
<h5 id="Passing-Arguments-To-Function"><a href="#Passing-Arguments-To-Function" class="headerlink" title="Passing Arguments To Function"></a>Passing Arguments To Function</h5><p>Except positional argument can be passed , as you run a function at command line, also you can pass argument by using flag syntax, like the arguments to <code>__init__</code>  method.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#@file: hello.py</span></div><div class="line"><span class="keyword">import</span> fire</div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span><span class="params">(object)</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, color)</span>:</span></div><div class="line">        self._color = color</div><div class="line"></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self, max_speed)</span>:</span></div><div class="line">        <span class="keyword">return</span> <span class="string">"The &#123;color&#125; car is runing below the maximum speed &#123;max_speed&#125; mph!"</span>\</div><div class="line">        .format(color=self._color, max_speed=max_speed)</div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    fire.Fire(Car)</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">$ python hello.py --color red run 100</div><div class="line">The red car is runing below the maximum speed 100 mph!</div><div class="line">$ python hello.py --color red run --max-speed=100</div><div class="line">The red car is runing below the maximum speed 100 mph!</div><div class="line">$ python hello.py --color red run --max_speed=100</div><div class="line">The red car is runing below the maximum speed 100 mph!</div><div class="line">$ python hello.py --color red run --max-speed 100</div><div class="line">The red car is runing below the maximum speed 100 mph!</div><div class="line">$ python hello.py run --max-speed 100 --color red</div><div class="line">The red car is runing below the maximum speed 100 mph!</div></pre></td></tr></table></figure>
<p>From the above invocation example, you might found some interesting things.</p>
<ul>
<li>Hyphens and underscores (<code>-</code> and <code>_</code>) are interchangeable in member names and flag names.</li>
<li>The constructor’s arguments can come after the function’s arguments or before the function.</li>
<li>The equal sign between the flag name and its value is optional.</li>
</ul>
<hr>
<h5 id="Arguments-Separator"><a href="#Arguments-Separator" class="headerlink" title="Arguments Separator"></a>Arguments Separator</h5><p>Normally, the arguments passed to a function are fixed, so you can append the further operations on the results, This is the chaining function call rule that are introduced before. But when your arguments are variable, the further operations( i.e. function)  on the results will be treated as an another argument that passed to the function. So, you need to an extra syntax to separate the arguments and the operations on the results. The default separator in <strong>fire</strong>  is the hyphens <code>-</code> , you can change the default separator using <code>--separator</code>  flags. Flags are alway separated from your Fire command by an isolated <code>--</code>. All arguments after the separator will be used to process the result of the function, rather than being passed to the function itself. Here’s an example will show how it works.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#@file: hello.py</span></div><div class="line"><span class="keyword">import</span> fire</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">sort_animals</span><span class="params">(*animals)</span>:</span></div><div class="line">    sorted_items = sorted(animals, key=<span class="keyword">lambda</span> item: len(str(item)))</div><div class="line">    <span class="keyword">return</span> <span class="string">' &gt; '</span>.join(sorted_items)</div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    fire.Fire(sort_animals)</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ python hello.py cat dog pig chicken</div><div class="line">cat &gt; dog &gt; pig &gt; chicken</div></pre></td></tr></table></figure>
<p>If we want to convert all animal’s name characters to the uppercase, how to do that? </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ python hello.py cat dog pig chicken upper</div><div class="line">cat &gt; dog &gt; pig &gt; upper &gt; chicken</div></pre></td></tr></table></figure>
<p>As you see the above output result, it didn’t work! Hey, don’t forget thing mentioned just now:<strong>Separator</strong>.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ python hello.py cat dog pig chicken - upper</div><div class="line">CAT &gt; DOG &gt; PIG &gt; CHICKEN</div></pre></td></tr></table></figure>
<p>Congratulations! it do works. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ python hello.py cat dog pig chicken X upper -- --separator X</div><div class="line">CAT &gt; DOG &gt; PIG &gt; CHICKEN</div></pre></td></tr></table></figure>
<p>The above code also work fine! Here you just change the default separator the hyphens <code>-</code> to <code>X</code>.</p>
<h4 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h4><p><a href="https://github.com/google/python-fire/blob/master/docs/guide.md" target="_blank" rel="external">[1] :The Python Fire Guide</a></p>
<p><a href="https://github.com/google/python-fire" target="_blank" rel="external">[2] : README</a></p>
</div></article></div></main><footer><div class="paginator"><a href="/2018/03/13/execute-shell-commands-in-python/" class="prev">PREV</a><a href="/2018/02/27/convert-amr-to-mp3-using-python-and-ffmpeg/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2019 <a href="https://free-free.github.io">infinite.ft</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>